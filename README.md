# ğŸ” VerifyVision-Pro ğŸ–¼ï¸

<div align="center">

<div style="width: 100%; max-width: 600px; margin: 0 auto;">
  <img src="static/img/logo.png" alt="VerifyVision-Pro Logo" style="width: 100%; height: auto; display: block; margin: 0 auto;">
</div>

<br><br>

![Status](https://img.shields.io/badge/status-active-success.svg)
![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Python](https://img.shields.io/badge/python-3.7+-blue.svg)
![PyTorch](https://img.shields.io/badge/PyTorch-2.0+-red.svg)

**æ·±åº¦å­¦ä¹ é©±åŠ¨çš„å›¾åƒä¼ªé€ æ£€æµ‹ç³»ç»Ÿ**  
**A Deep Learning-Powered Image Forgery Detection System**

[English](README_EN.md) | [ä¸­æ–‡](#chinese-documentation)

</div>

---

<a name="chinese-documentation"></a>
## ğŸ”­ é¡¹ç›®æ¦‚è¿° <a name="é¡¹ç›®æ¦‚è¿°"></a>

<div align="center">

### ğŸ–¥ï¸ ç³»ç»Ÿç•Œé¢ç¤ºä¾‹

<img src="static/img/example.png" alt="VerifyVision-Pro ç³»ç»Ÿç•Œé¢ç¤ºä¾‹" style="width: 100%; max-width: 800px; height: auto; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">

*å›¾ï¼šVerifyVision-Pro Webç•Œé¢ - æ˜¾ç¤ºå›¾åƒä¼ªé€ æ£€æµ‹ç»“æœå’Œè¯¦ç»†åˆ†æ*

</div>

VerifyVision-Proæ˜¯ä¸€ä¸ªç»¼åˆæ€§çš„åŸºäºæ·±åº¦å­¦ä¹ çš„å›¾åƒä¼ªé€ æ£€æµ‹ç³»ç»Ÿï¼Œèƒ½å¤Ÿé«˜ç²¾åº¦åœ°è¯†åˆ«å„ç§å›¾åƒç¯¡æ”¹ã€‚ç³»ç»Ÿé›†æˆäº†å¼ºå¤§çš„æ•°æ®å¤„ç†æµç¨‹ã€å…ˆè¿›çš„æ·±åº¦å­¦ä¹ æ¨¡å‹å’Œç›´è§‚çš„Webç•Œé¢ï¼Œå®ç°å®æ—¶æ£€æµ‹åŠŸèƒ½ã€‚

### ğŸŒŸ ä¸»è¦ç‰¹ç‚¹

1. **ğŸ§  å¤šæ¨¡å‹æ¶æ„æ”¯æŒ**ï¼šé›†æˆEfficientNetã€ResNetã€Xceptionã€CNNç­‰å‰æ²¿æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œæ”¯æŒè¿ç§»å­¦ä¹ å’Œè‡ªå®šä¹‰æ¶æ„ï¼Œä¸ºä¸åŒåœºæ™¯æä¾›æœ€ä¼˜æ£€æµ‹æ–¹æ¡ˆ

2. **ğŸ”„ ç«¯åˆ°ç«¯å®Œæ•´æµç¨‹**ï¼šä»åŸå§‹æ•°æ®é¢„å¤„ç†ã€æ¨¡å‹è®­ç»ƒã€æ€§èƒ½è¯„ä¼°åˆ°ç”Ÿäº§éƒ¨ç½²çš„å…¨é“¾è·¯è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒè‡ªåŠ¨åŒ–æ•°æ®å¢å¼ºå’Œæ¨¡å‹ä¼˜åŒ–

3. **ğŸ¨ ç°ä»£åŒ–Webç•Œé¢**ï¼šåŸºäºBootstrap 5.3.2æ„å»ºçš„å“åº”å¼ç”¨æˆ·ç•Œé¢ï¼Œæ”¯æŒæ‹–æ‹½ä¸Šä¼ ã€å®æ—¶é¢„è§ˆã€æš—è‰²ä¸»é¢˜åˆ‡æ¢ï¼Œæä¾›ç›´è§‚çš„æ£€æµ‹ç»“æœå¯è§†åŒ–

4. **ğŸ“Š æ™ºèƒ½åˆ†æå¼•æ“**ï¼šæä¾›ç½®ä¿¡åº¦è¯„åˆ†ã€æ¦‚ç‡åˆ†å¸ƒåˆ†æã€æ··æ·†çŸ©é˜µå¯è§†åŒ–ï¼Œæ”¯æŒROCæ›²çº¿å’ŒAUCæŒ‡æ ‡ï¼Œå¸®åŠ©ç”¨æˆ·æ·±å…¥ç†è§£æ£€æµ‹ç»“æœ

5. **âš¡ é«˜æ€§èƒ½æ¨ç†ä¼˜åŒ–**ï¼šæ”¯æŒCUDA GPUåŠ é€Ÿã€æ¨¡å‹é‡åŒ–ã€æ‰¹å¤„ç†æ¨ç†ï¼Œæ¯«ç§’çº§å“åº”é€Ÿåº¦ï¼Œå¯å¤„ç†å¤§è§„æ¨¡å›¾åƒæ£€æµ‹ä»»åŠ¡

6. **ğŸ”§ ä¼ä¸šçº§ç‰¹æ€§**ï¼šå†…ç½®æ—¥å¿—ç³»ç»Ÿã€é”™è¯¯å¤„ç†ã€APIæ¥å£ã€Dockerå®¹å™¨åŒ–æ”¯æŒï¼Œæ»¡è¶³ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²éœ€æ±‚

## ğŸ“ é¡¹ç›®ç»“æ„ <a name="é¡¹ç›®ç»“æ„"></a>

```
VerifyVision-Pro/
â”‚
â”œâ”€â”€ data/                      # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ real/                  # çœŸå®å›¾åƒ
â”‚   â”œâ”€â”€ fake/                  # ä¼ªé€ å›¾åƒ
â”‚   â””â”€â”€ processed/             # é¢„å¤„ç†åçš„å›¾åƒ
â”‚
â”œâ”€â”€ models/                    # æ¨¡å‹ç›®å½•ï¼ˆå·²è¢«gitå¿½ç•¥ï¼‰
â”‚   â””â”€â”€ saved/                 # ä¿å­˜çš„æ¨¡å‹æƒé‡
â”‚
â”œâ”€â”€ src/                       # æºä»£ç 
â”‚   â”œâ”€â”€ data_utils/            # æ•°æ®å¤„ç†å·¥å…·
â”‚   â”‚   â”œâ”€â”€ dataset.py         # æ•°æ®é›†ç±»
â”‚   â”‚   â””â”€â”€ data_processor.py  # æ•°æ®é¢„å¤„ç†å·¥å…·
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                # æ¨¡å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ models.py          # æ·±åº¦å­¦ä¹ æ¨¡å‹å®ç°
â”‚   â”‚
â”‚   â”œâ”€â”€ training/              # è®­ç»ƒç›¸å…³
â”‚   â”‚   â”œâ”€â”€ train.py           # è®­ç»ƒè„šæœ¬
â”‚   â”‚   â””â”€â”€ evaluate.py        # è¯„ä¼°è„šæœ¬
â”‚   â”‚
â”‚   â””â”€â”€ web/                   # Webåº”ç”¨
â”‚       â””â”€â”€ app.py             # Flaskåº”ç”¨
â”‚
â”œâ”€â”€ static/                    # é™æ€èµ„æº
â”‚   â”œâ”€â”€ css/                   # CSSæ ·å¼
â”‚   â”‚   â””â”€â”€ style.css          # è‡ªå®šä¹‰æ ·å¼
â”‚   â”‚
â”‚   â”œâ”€â”€ js/                    # JavaScript
â”‚   â”‚   â””â”€â”€ main.js            # ä¸»JSæ–‡ä»¶
â”‚   â”‚
â”‚   â””â”€â”€ uploads/               # ç”¨æˆ·ä¸Šä¼ çš„å›¾åƒ
â”‚
â”œâ”€â”€ templates/                 # HTMLæ¨¡æ¿
â”‚   â”œâ”€â”€ base.html              # åŸºç¡€æ¨¡æ¿
â”‚   â”œâ”€â”€ index.html             # é¦–é¡µ
â”‚   â”œâ”€â”€ result.html            # ç»“æœé¡µé¢
â”‚   â””â”€â”€ about.html             # å…³äºé¡µé¢
â”‚
â”œâ”€â”€ generate_test_images.py    # æµ‹è¯•å›¾åƒç”Ÿæˆè„šæœ¬
â”œâ”€â”€ main.py                    # é¡¹ç›®ä¸»å…¥å£ç¨‹åº
â”œâ”€â”€ requirements.txt           # é¡¹ç›®ä¾èµ–
â””â”€â”€ README.md                  # é¡¹ç›®è¯´æ˜
```

## ğŸ’» ç³»ç»Ÿè¦æ±‚ <a name="ç³»ç»Ÿè¦æ±‚"></a>

### æœ€ä½é…ç½®

- **Python**: 3.7+
- **PyTorch**: 2.0+
- **å†…å­˜**: 4GBï¼ˆä»…CPUï¼‰ï¼Œ8GBï¼ˆå¸¦GPUï¼‰
- **å­˜å‚¨**: ä»£ç å’ŒåŸºæœ¬æ•°æ®é›†éœ€è¦1GB
- **æ“ä½œç³»ç»Ÿ**: Windows 10+, macOS 10.15+, Ubuntu 18.04+

### æ¨èé…ç½®

- **Python**: 3.9+
- **PyTorch**: 2.0+ï¼ˆå¸¦CUDAæ”¯æŒï¼‰
- **GPU**: NVIDIA GPUï¼Œæ”¯æŒCUDAï¼ˆ8GB+æ˜¾å­˜ï¼‰
- **å†…å­˜**: 16GB
- **å­˜å‚¨**: æ‰©å±•æ•°æ®é›†éœ€è¦10GB+
- **æ“ä½œç³»ç»Ÿ**: Ubuntu 20.04+æˆ–macOS 12+

## ğŸ“¦ å®‰è£… <a name="å®‰è£…"></a>

### æ­¥éª¤1ï¼šå…‹éš†ä»“åº“

```bash
git clone https://github.com/lintsinghua/VerifyVision-Pro.git
cd VerifyVision-Pro
```

### æ­¥éª¤2ï¼šåˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰

```bash
# macOS/Linux
python -m venv imgvenv
source imgvenv/bin/activate

# Windows
python -m venv imgvenv
imgvenv\Scripts\activate
```

### æ­¥éª¤3ï¼šå®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### æ­¥éª¤4ï¼šéªŒè¯å®‰è£…

```bash
# æ£€æŸ¥PyTorchæ˜¯å¦æ­£ç¡®å®‰è£…å¹¶æ”¯æŒCUDAï¼ˆå¦‚æœå¯ç”¨ï¼‰
python -c "import torch; print('CUDAå¯ç”¨ï¼š', torch.cuda.is_available())"
```

### å¯é€‰ï¼šGPUé…ç½®

å¦‚æœæ‚¨æœ‰NVIDIA GPUï¼Œè¯·ç¡®ä¿å®‰è£…äº†ä¸æ‚¨çš„PyTorchç‰ˆæœ¬å…¼å®¹çš„CUDAå·¥å…·åŒ…å’ŒcuDNNã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹ <a name="å¿«é€Ÿå¼€å§‹"></a>

æŒ‰ç…§ä»¥ä¸‹æŒ‡å—å¿«é€Ÿè®¾ç½®å’Œè¿è¡ŒVerifyVision-Proç³»ç»Ÿï¼š

### æ­¥éª¤1ï¼šç”Ÿæˆæµ‹è¯•æ•°æ® ğŸ²

é¦–å…ˆï¼Œä¸ºç³»ç»Ÿæµ‹è¯•ç”Ÿæˆæ ·æœ¬å›¾åƒï¼š

```bash
python generate_test_images.py
```

è¿™å°†åœ¨ç›¸åº”çš„æ•°æ®ç›®å½•ä¸­åˆ›å»º20å¼ çœŸå®å›¾åƒå’Œ20å¼ ä¼ªé€ å›¾åƒã€‚

### æ­¥éª¤2ï¼šé¢„å¤„ç†å›¾åƒ ğŸ–Œï¸

å‡†å¤‡ç”¨äºæ¨¡å‹è®­ç»ƒçš„å›¾åƒï¼š

```bash
# å¤„ç†çœŸå®å›¾åƒ
python main.py preprocess --input-dir data/real --output-dir data/processed/real --target-size 224 224

# å¤„ç†ä¼ªé€ å›¾åƒ
python main.py preprocess --input-dir data/fake --output-dir data/processed/fake --target-size 224 224
```

### æ­¥éª¤3ï¼šè®­ç»ƒæ¨¡å‹ ğŸ§ 

ä½¿ç”¨é¢„å¤„ç†åçš„æ•°æ®è®­ç»ƒåŸºæœ¬CNNæ¨¡å‹ï¼š

```bash
python main.py train \
  --real-dir data/processed/real \
  --fake-dir data/processed/fake \
  --model cnn \
  --pretrained \
  --epochs 5 \
  --batch-size 4 \
  --save-dir models/saved
```

> **æ³¨æ„**ï¼šåˆå§‹æµ‹è¯•æ—¶ï¼Œå°‘é‡çš„epochsï¼ˆå¦‚5ï¼‰å°±è¶³å¤Ÿäº†ã€‚è‹¥è¦æé«˜æ€§èƒ½ï¼Œå¯å¢åŠ è®­ç»ƒå‘¨æœŸã€‚

### æ­¥éª¤4ï¼šå¯åŠ¨Webåº”ç”¨ ğŸŒ

å¯åŠ¨Webç•Œé¢ä»¥ä¸è®­ç»ƒå¥½çš„æ¨¡å‹äº¤äº’ï¼š

```bash
python main.py web \
  --model-path models/saved/best_model.pth \
  --model-name cnn \
  --port 8080 \
  --debug
```

> **é‡è¦**ï¼šåœ¨macOSä¸Šï¼Œç«¯å£5000å¯èƒ½è¢«AirPlayæœåŠ¡å ç”¨ï¼Œå»ºè®®ä½¿ç”¨ç«¯å£8080ã€‚

### æ­¥éª¤5ï¼šè®¿é—®åº”ç”¨ ğŸ–±ï¸

æ‰“å¼€æµè§ˆå™¨è®¿é—®[http://localhost:8080](http://localhost:8080)å³å¯ä½¿ç”¨ç³»ç»Ÿã€‚

## ğŸ“Š æ•°æ®å‡†å¤‡ <a name="æ•°æ®å‡†å¤‡"></a>

### è·å–æ•°æ®é›† ğŸ“¥

æœ‰å¤šç§æ–¹æ³•å¯ä»¥æ”¶é›†è®­ç»ƒå’Œæµ‹è¯•æ•°æ®ï¼š

#### æ–¹æ³•1ï¼šæµ‹è¯•æ•°æ®ç”Ÿæˆï¼ˆæ¨èåˆå­¦è€…ä½¿ç”¨ï¼‰

å†…ç½®è„šæœ¬å¯ç”Ÿæˆç”¨äºæµ‹è¯•çš„åˆæˆæ•°æ®ï¼š

```bash
python generate_test_images.py
```

**åŠŸèƒ½è¯´æ˜ï¼š**
- åˆ›å»º`data/real`å’Œ`data/fake`ç›®å½•
- ç”Ÿæˆ20å¼ å…·æœ‰éšæœºå†…å®¹çš„çœŸå®å›¾åƒ
- åˆ›å»º20å¼ å¯¹åº”çš„ä¼ªé€ å›¾åƒ
- é€‚ç”¨äºåˆå§‹ç³»ç»Ÿæµ‹è¯•å’ŒéªŒè¯

#### æ–¹æ³•2ï¼šå…¬å¼€æ•°æ®é›†

è·å–å…³äºå…¬å¼€å›¾åƒä¼ªé€ æ£€æµ‹æ•°æ®é›†çš„ä¿¡æ¯ï¼š

```bash
python main.py download-info
```

è¿™ä¼šæ˜¾ç¤ºå›¾åƒä¼ªé€ æ£€æµ‹ç ”ç©¶ä¸­å¸¸ç”¨çš„æ•°æ®é›†é“¾æ¥ï¼ŒåŒ…æ‹¬ï¼š
- CASIA v1.0å’Œv2.0
- Columbiaå›¾åƒæ‹¼æ¥æ£€æµ‹
- CoMoFoDï¼ˆæ‹·è´-ç§»åŠ¨ä¼ªé€ æ•°æ®é›†ï¼‰
- Coverage
- IEEE IFS-TCå›¾åƒå–è¯æŒ‘æˆ˜æ•°æ®é›†

#### æ–¹æ³•3ï¼šè‡ªå®šä¹‰æ•°æ®é›†åˆ›å»º

é€šè¿‡ä»¥ä¸‹æ–¹æ³•æ„å»ºè‡ªå·±çš„æ•°æ®é›†ï¼š

1. **æ”¶é›†çœŸå®å›¾åƒ**ï¼š
   - å°†çœŸå®å›¾åƒæ”¾å…¥`data/real`ç›®å½•
   - ä½¿ç”¨ä¸ªäººç…§ç‰‡æˆ–å…¬å…±é¢†åŸŸå›¾åƒ
   - ç¡®ä¿å†…å®¹ã€å…‰çº¿æ¡ä»¶å’Œæ¥æºè®¾å¤‡å¤šæ ·åŒ–

2. **åˆ›å»ºä¼ªé€ å›¾åƒ**ï¼š
   ```bash
   python main.py create-fake \
     --real-dir data/real \
     --fake-dir data/fake \
     --method splice \
     --num-images 1000
   ```

**å¯ç”¨ä¼ªé€ æ–¹æ³•ï¼š**
- `splice`ï¼šç»„åˆæ¥è‡ªä¸åŒå›¾åƒçš„åŒºåŸŸ
- `copy`ï¼šå¤åˆ¶åŒä¸€å›¾åƒå†…çš„åŒºåŸŸ
- `noise`ï¼šæ·»åŠ å±€éƒ¨å™ªå£°ä»¥åˆ›å»ºä¸ä¸€è‡´
- `color`ï¼šåœ¨ç‰¹å®šåŒºåŸŸæ“ä½œé¢œè‰²å±æ€§

### é¢„å¤„ç†æ•°æ® ğŸ”„

è®­ç»ƒå‰ï¼Œéœ€è¦å¯¹å›¾åƒè¿›è¡Œé¢„å¤„ç†ä»¥ä¿æŒä¸€è‡´æ€§ï¼š

```bash
python main.py preprocess \
  --input-dir data/real \
  --output-dir data/processed/real \
  --target-size 224 224 \
  --max-images 5000
```

**é¢„å¤„ç†æ“ä½œåŒ…æ‹¬ï¼š**
- è°ƒæ•´ä¸ºç»Ÿä¸€å°ºå¯¸
- æ ‡å‡†åŒ–
- å¯é€‰çš„æ•°æ®å¢å¼ºï¼ˆæ—‹è½¬ã€ç¿»è½¬ç­‰ï¼‰
- æ ¼å¼æ ‡å‡†åŒ–
- å¯é€‰çš„è‰²å½©ç©ºé—´è½¬æ¢

**å‚æ•°è¯´æ˜ï¼š**
- `--input-dir`ï¼šæºå›¾åƒç›®å½•
- `--output-dir`ï¼šå¤„ç†åå›¾åƒçš„ç›®æ ‡ç›®å½•
- `--target-size`ï¼šè¾“å‡ºå°ºå¯¸ï¼ˆå®½åº¦ é«˜åº¦ï¼‰
- `--max-images`ï¼šé™åˆ¶å¤„ç†çš„å›¾åƒæ•°é‡ï¼ˆå¯é€‰ï¼‰
- `--augment`ï¼šåº”ç”¨æ•°æ®å¢å¼ºï¼ˆå¯é€‰ï¼‰

## ğŸ‹ï¸â€â™‚ï¸ æ¨¡å‹è®­ç»ƒ <a name="æ¨¡å‹è®­ç»ƒ"></a>

### ä»å¤´å¼€å§‹è®­ç»ƒæ¨¡å‹

VerifyVision-Proæ”¯æŒè®­ç»ƒå„ç§æ·±åº¦å­¦ä¹ æ¨¡å‹è¿›è¡Œå›¾åƒä¼ªé€ æ£€æµ‹ï¼š

```bash
python main.py train \
  --real-dir data/processed/real \
  --fake-dir data/processed/fake \
  --model efficientnet_b0 \
  --pretrained \
  --epochs 30 \
  --batch-size 32 \
  --learning-rate 0.001 \
  --save-dir models/saved \
  --early-stopping \
  --patience 5
```

### å¯ç”¨æ¨¡å‹

ç³»ç»Ÿå®ç°äº†å¤šç§æœ€å…ˆè¿›çš„æ¶æ„ï¼š

| æ¨¡å‹ | æè¿° | å‚æ•°æ•°é‡ | é€‚ç”¨åœºæ™¯ |
|-------|-------------|------------|--------------|
| `cnn` | è‡ªå®šä¹‰CNN | ~500K | å¿«é€Ÿæµ‹è¯•ï¼Œæœ‰é™æ•°æ® |
| `resnet18` | ResNet-18 | ~11M | å°å‹åˆ°ä¸­å‹æ•°æ®é›† |
| `resnet50` | ResNet-50 | ~25M | ä¸­å‹æ•°æ®é›† |
| `efficientnet_b0` | EfficientNet-B0 | ~5M | å¹³è¡¡æ€§èƒ½ |
| `xception` | Xception | ~22M | é«˜çº§ç‰¹å¾ |

### è®­ç»ƒå‚æ•°

è®­ç»ƒæ¨¡å—æä¾›å…¨é¢çš„è‡ªå®šä¹‰é€‰é¡¹ï¼š

| å‚æ•° | æè¿° | é»˜è®¤å€¼ | å¤‡æ³¨ |
|-----------|-------------|---------|-------|
| `--real-dir` | çœŸå®å›¾åƒç›®å½• | - | å¿…éœ€ |
| `--fake-dir` | ä¼ªé€ å›¾åƒç›®å½• | - | å¿…éœ€ |
| `--model` | æ¨¡å‹æ¶æ„ | `efficientnet_b0` | æŸ¥çœ‹å¯ç”¨æ¨¡å‹ |
| `--pretrained` | ä½¿ç”¨é¢„è®­ç»ƒæƒé‡ | `False` | æ ‡å¿— |
| `--epochs` | è®­ç»ƒå‘¨æœŸ | `30` | |
| `--batch-size` | æ‰¹æ¬¡å¤§å° | `32` | å‡å°ä»¥é™ä½å†…å­˜å ç”¨ |
| `--learning-rate` | å­¦ä¹ ç‡ | `0.001` | |
| `--weight-decay` | L2æ­£åˆ™åŒ– | `0.0001` | |
| `--save-dir` | ä¿å­˜ç›®å½• | `models/saved` | |
| `--early-stopping` | å¯ç”¨æ—©åœ | `False` | æ ‡å¿— |
| `--patience` | æ—©åœå‘¨æœŸæ•° | `5` | |
| `--validation-split` | éªŒè¯æ•°æ®æ¯”ä¾‹ | `0.2` | |

### è®­ç»ƒè¿‡ç¨‹

è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œç³»ç»Ÿä¼šï¼š

1. å°†æ•°æ®åˆ†å‰²ä¸ºè®­ç»ƒé›†å’ŒéªŒè¯é›†
2. åŠ è½½æˆ–åˆå§‹åŒ–æ‰€é€‰æ¨¡å‹æ¶æ„
3. å¦‚æœè¯·æ±‚äº†é¢„è®­ç»ƒæƒé‡ï¼Œåº”ç”¨è¿ç§»å­¦ä¹ 
4. ä½¿ç”¨æŒ‡å®šå­¦ä¹ ç‡çš„Adamä¼˜åŒ–å™¨è¿›è¡Œä¼˜åŒ–
5. å®ç°å­¦ä¹ ç‡è°ƒåº¦ä»¥è·å¾—æ›´å¥½çš„æ”¶æ•›æ€§
6. ç›‘æ§éªŒè¯æŒ‡æ ‡ä»¥é˜²æ­¢è¿‡æ‹Ÿåˆ
7. æ ¹æ®éªŒè¯ç²¾åº¦ä¿å­˜è¡¨ç°æœ€ä½³çš„æ¨¡å‹
8. ç”Ÿæˆè®­ç»ƒæ›²çº¿å’Œæ€§èƒ½ç»Ÿè®¡

### é«˜çº§è®­ç»ƒåŠŸèƒ½

- **æ—©åœ**ï¼šå½“æ€§èƒ½è¾¾åˆ°å¹³å°æœŸæ—¶è‡ªåŠ¨åœæ­¢è®­ç»ƒ
- **å­¦ä¹ ç‡è°ƒåº¦**ï¼šå½“è¿›åº¦åœæ»æ—¶é™ä½å­¦ä¹ ç‡
- **æ£€æŸ¥ç‚¹**ï¼šåœ¨è®­ç»ƒæœŸé—´å®šæœŸä¿å­˜æ¨¡å‹
- **æ··åˆç²¾åº¦**ï¼šåœ¨ç¡¬ä»¶æ”¯æŒæ—¶ä½¿ç”¨FP16è®­ç»ƒ
- **æ¢¯åº¦è£å‰ª**ï¼šé˜²æ­¢æ¢¯åº¦çˆ†ç‚¸
- **æ•°æ®å¢å¼º**ï¼šè®­ç»ƒæœŸé—´å¯é€‰çš„å®æ—¶å¢å¼º

## ğŸ“ æ¨¡å‹è¯„ä¼° <a name="æ¨¡å‹è¯„ä¼°"></a>

### è¯„ä¼°æ¨¡å‹æ€§èƒ½

è®­ç»ƒåï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¯„ä¼°æ¨¡å‹æ€§èƒ½ï¼š

```bash
python main.py evaluate \
  --real-dir data/processed/real \
  --fake-dir data/processed/fake \
  --model efficientnet_b0 \
  --checkpoint models/saved/best_model.pth \
  --results-dir results \
  --confusion-matrix \
  --roc-curve
```

### è¯„ä¼°æŒ‡æ ‡

è¯„ä¼°æ¨¡å—æä¾›å…¨é¢çš„æ€§èƒ½æŒ‡æ ‡ï¼š

| æŒ‡æ ‡ | æè¿° | èŒƒå›´ |
|--------|-------------|-------|
| å‡†ç¡®ç‡ | æ€»ä½“æ­£ç¡®é¢„æµ‹æ¯”ä¾‹ | 0-1 |
| ç²¾ç¡®ç‡ | çœŸé˜³æ€§/é¢„æµ‹é˜³æ€§ | 0-1 |
| å¬å›ç‡ | çœŸé˜³æ€§/å®é™…é˜³æ€§ | 0-1 |
| F1åˆ†æ•° | ç²¾ç¡®ç‡å’Œå¬å›ç‡çš„è°ƒå’Œå¹³å‡ | 0-1 |
| AUC-ROC | ROCæ›²çº¿ä¸‹é¢ç§¯ | 0-1 |
| æ··æ·†çŸ©é˜µ | é¢„æµ‹ä¸çœŸå®å€¼çš„å¯è§†åŒ– | - |

### é«˜çº§è¯„ä¼°åŠŸèƒ½

- **åˆ†ç±»åˆ«åˆ†æ**ï¼šçœŸå®å’Œä¼ªé€ ç±»åˆ«çš„è¯¦ç»†æŒ‡æ ‡
- **ç½®ä¿¡åº¦åˆ†å¸ƒ**ï¼šé¢„æµ‹ç½®ä¿¡åº¦çš„ç›´æ–¹å›¾
- **å¤±è´¥åˆ†æ**ï¼šå¯¹é”™è¯¯åˆ†ç±»æ ·æœ¬çš„æ£€æŸ¥
- **ç‰¹å¾å¯è§†åŒ–**ï¼šæ˜¾ç¤ºå½±å“åŒºåŸŸçš„æ¿€æ´»å›¾
- **äº¤å‰éªŒè¯**ï¼šå¯é€‰çš„kæŠ˜äº¤å‰éªŒè¯ä»¥è·å¾—ç¨³å¥è¯„ä¼°

### è§£è¯»ç»“æœ

è¯„ä¼°ç»“æœæœ‰åŠ©äºç†è§£ï¼š

- æ¨¡å‹å¯¹æœªè§æ•°æ®çš„æ³›åŒ–èƒ½åŠ›
- æ¨¡å‹æ˜¯å¦åå‘ç‰¹å®šç±»åˆ«
- å¯¼è‡´æ£€æµ‹å¤±è´¥çš„å›¾åƒç±»å‹
- é¢„æµ‹çš„ç½®ä¿¡åº¦æ°´å¹³
- å¯èƒ½çš„æ”¹è¿›é¢†åŸŸ

## ğŸŒ Webåº”ç”¨ <a name="webåº”ç”¨"></a>

### å¯åŠ¨Webç•Œé¢

å¯åŠ¨Webåº”ç”¨ä»¥ä¸è®­ç»ƒå¥½çš„æ¨¡å‹äº¤äº’ï¼š

```bash
python main.py web \
  --model-path models/saved/best_model.pth \
  --model-name efficientnet_b0 \
  --port 8080 \
  --host 0.0.0.0 \
  --debug
```

### Webåº”ç”¨åŠŸèƒ½

VerifyVision-Proçš„Webç•Œé¢æä¾›ï¼š

- **ç”¨æˆ·å‹å¥½çš„ä¸Šä¼ **ï¼šç®€å•çš„æ‹–æ”¾æˆ–æ–‡ä»¶é€‰æ‹©ç•Œé¢
- **å®æ—¶åˆ†æ**ï¼šå³æ—¶å¤„ç†å’Œç»“æœæ˜¾ç¤º
- **è§†è§‰åé¦ˆ**ï¼šæ¸…æ™°æ˜¾ç¤ºçœŸä¼ªç»“æœå’Œç½®ä¿¡åº¦åˆ†æ•°
- **çƒ­åŠ›å›¾å¯è§†åŒ–**ï¼šå¯é€‰çš„å¯ç–‘åŒºåŸŸå¯è§†åŒ–
- **ç»“æœå†å²**ï¼šåŸºäºä¼šè¯çš„åˆ†æå›¾åƒå†å²
- **å“åº”å¼è®¾è®¡**ï¼šé€‚ç”¨äºæ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡

### è®¾ç½®å‚æ•°

| å‚æ•° | æè¿° | é»˜è®¤å€¼ | å¤‡æ³¨ |
|-----------|-------------|---------|-------|
| `--model-path` | æ¨¡å‹æ–‡ä»¶è·¯å¾„ | - | å¿…éœ€ |
| `--model-name` | æ¨¡å‹æ¶æ„ | - | å¿…éœ€ |
| `--port` | æœåŠ¡å™¨ç«¯å£ | `5000` | macOSä¸Šä½¿ç”¨`8080` |
| `--host` | ä¸»æœºåœ°å€ | `127.0.0.1` | å¤–éƒ¨è®¿é—®ä½¿ç”¨`0.0.0.0` |
| `--debug` | å¯ç”¨è°ƒè¯•æ¨¡å¼ | `False` | æ ‡å¿— |
| `--max-size` | æœ€å¤§ä¸Šä¼ å¤§å°(MB) | `5` | |
| `--threshold` | æ£€æµ‹é˜ˆå€¼ | `0.5` | èŒƒå›´ï¼š0-1 |

### ä½¿ç”¨Webåº”ç”¨ ğŸ’»

1. **ä¸Šä¼ å›¾åƒ**ï¼š
   - ç‚¹å‡»"é€‰æ‹©æ–‡ä»¶"æˆ–å°†å›¾åƒæ‹–æ”¾åˆ°ä¸Šä¼ åŒºåŸŸ
   - æ”¯æŒçš„æ ¼å¼ï¼šJPGã€JPEGã€PNG
   - æœ€å¤§æ–‡ä»¶å¤§å°ï¼š5MBï¼ˆå¯é…ç½®ï¼‰

2. **åˆ†æå›¾åƒ**ï¼š
   - ç‚¹å‡»"ä¸Šä¼ å¹¶æ£€æµ‹"æŒ‰é’®
   - ç³»ç»Ÿé€šè¿‡æ¨¡å‹å¤„ç†å›¾åƒ

3. **æŸ¥çœ‹ç»“æœ**ï¼š
   - æ˜¾ç¤ºçœŸå®/ä¼ªé€ åˆ†ç±»ç»“æœ
   - ç½®ä¿¡åº¦åˆ†æ•°è¡¨ç¤ºæ£€æµ‹ç¡®å®šæ€§
   - å¯é€‰çš„çƒ­åŠ›å›¾å¯è§†åŒ–çªå‡ºæ˜¾ç¤ºå¯ç–‘åŒºåŸŸ
   - é™„åŠ å…ƒæ•°æ®æ˜¾ç¤ºå›¾åƒå±æ€§

4. **è§£è¯»ç»“æœ**ï¼š
   - æ›´é«˜çš„ç½®ä¿¡åº¦åˆ†æ•°è¡¨ç¤ºæ›´å¤§çš„ç¡®å®šæ€§
   - æ¥è¿‘0.5çš„åˆ†æ•°è¡¨ç¤ºä¸ç¡®å®šæ€§
   - å¯¹äºæ¨¡ç³Šçš„æƒ…å†µï¼Œè€ƒè™‘ä½¿ç”¨å¤šä¸ªæ¨¡å‹

### éƒ¨ç½²é€‰é¡¹

å¯¹äºç”Ÿäº§éƒ¨ç½²ï¼Œè€ƒè™‘ä»¥ä¸‹æ–¹æ¡ˆï¼š

- **Nginx/Apache**ï¼šè®¾ç½®åå‘ä»£ç†ä»¥æé«˜å®‰å…¨æ€§å’Œæ€§èƒ½
- **Docker**ï¼šå®¹å™¨åŒ–éƒ¨ç½²ä»¥ä¿æŒç¯å¢ƒä¸€è‡´æ€§
- **äº‘å¹³å°**ï¼šAWSã€Google Cloudæˆ–Azureä»¥å®ç°å¯æ‰©å±•æ€§
- **SSLè¯ä¹¦**ï¼šå¯ç”¨HTTPSä»¥è¿›è¡Œå®‰å…¨é€šä¿¡
- **è®¿é—®é™åˆ¶**ï¼šé˜²æ­¢æœåŠ¡æ»¥ç”¨

## ğŸ”§ æŠ€æœ¯å®ç° <a name="æŠ€æœ¯å®ç°"></a>

### æ ¸å¿ƒæŠ€æœ¯

VerifyVision-ProåŸºäºç°ä»£æŠ€æœ¯æ„å»ºï¼Œä»¥å®ç°å¯é çš„æ€§èƒ½ï¼š

#### æ•°æ®å¤„ç†
- **OpenCV**ï¼šå›¾åƒåŠ è½½ã€é¢„å¤„ç†å’Œæ“ä½œ
- **PIL (Pillow)**ï¼šå›¾åƒæ ¼å¼å¤„ç†å’Œè½¬æ¢
- **Albumentations**ï¼šé«˜çº§æ•°æ®å¢å¼ºæµç¨‹
- **NumPy**ï¼šå›¾åƒæ•°æ®çš„é«˜æ•ˆæ•°å€¼è¿ç®—

#### æ·±åº¦å­¦ä¹ æ¡†æ¶
- **PyTorch**ï¼šä¸»è¦æ·±åº¦å­¦ä¹ æ¡†æ¶
- **TorchVision**ï¼šé¢„è®­ç»ƒæ¨¡å‹å’Œæ•°æ®é›†å®ç”¨å·¥å…·
- **CUDA**ï¼šç”¨äºè®­ç»ƒå’Œæ¨ç†çš„GPUåŠ é€Ÿ
- **torchinfo**ï¼šæ¨¡å‹æ¶æ„å¯è§†åŒ–å’Œåˆ†æ

#### æ¨¡å‹æ¶æ„
- **EfficientNet**ï¼šèµ„æºé«˜æ•ˆçš„å·ç§¯æ¶æ„
- **ResNet**ï¼šå¸¦è·³è·ƒè¿æ¥çš„æ·±åº¦æ®‹å·®ç½‘ç»œ
- **Xception**ï¼šæ·±åº¦å¯åˆ†ç¦»å·ç§¯ä»¥æé«˜æ•ˆç‡
- **è‡ªå®šä¹‰CNN**ï¼šç”¨äºåŸºæœ¬æ£€æµ‹çš„è½»é‡çº§æ¶æ„

#### Webæ¡†æ¶
- **Flask**ï¼šè½»é‡çº§WebæœåŠ¡å™¨å®ç°
- **Werkzeug**ï¼šWebåº”ç”¨çš„WSGIå®ç”¨å·¥å…·åº“
- **Jinja2**ï¼šHTMLç”Ÿæˆçš„æ¨¡æ¿å¼•æ“
- **Flask-WTF**ï¼šè¡¨å•å¤„ç†å’ŒéªŒè¯

#### å‰ç«¯
- **Bootstrap**ï¼šå“åº”å¼è®¾è®¡æ¡†æ¶
- **JavaScript**ï¼šåŠ¨æ€å®¢æˆ·ç«¯åŠŸèƒ½
- **Chart.js**ï¼šç»“æœçš„äº¤äº’å¼å¯è§†åŒ–
- **Dropzone.js**ï¼šå¢å¼ºçš„æ–‡ä»¶ä¸Šä¼ ä½“éªŒ

### å®ç°ç»†èŠ‚

#### æ¨¡å‹æ¶æ„è®¾è®¡

ç³»ç»Ÿå®ç°äº†ä¸¤ç±»åˆ†ç±»æ–¹æ³•ï¼ŒåŒ…å«ï¼š

- **ç‰¹å¾æå–**ï¼šå·ç§¯å±‚æ•è·ç©ºé—´ç‰¹å¾
- **ç‰¹å¾èšåˆ**ï¼šæ± åŒ–æ“ä½œèšåˆå±€éƒ¨ä¿¡æ¯
- **åˆ†ç±»å¤´**ï¼šå…¨è¿æ¥å±‚ç”¨äºæœ€ç»ˆé¢„æµ‹
- **è¿ç§»å­¦ä¹ **ï¼šé¢„è®­ç»ƒç½‘ç»œçš„é€‚åº”
- **é¢†åŸŸç‰¹å®šç‰¹å¾**ï¼šç”¨äºä¼ªé€ æ£€æµ‹çš„è‡ªå®šä¹‰å±‚

#### è®­ç»ƒæµç¨‹

è®­ç»ƒç³»ç»Ÿå®ç°ï¼š

- **æ•°æ®é›†ç®¡ç†**ï¼šè‡ªå®šä¹‰PyTorchæ•°æ®é›†ç”¨äºé«˜æ•ˆåŠ è½½
- **å¹³è¡¡é‡‡æ ·**ï¼šç¡®ä¿ç±»åˆ«å¹³ç­‰è¡¨ç¤º
- **å¢å¼ºç­–ç•¥**ï¼šåœ¨è®­ç»ƒæœŸé—´åº”ç”¨ä»¥æé«˜é²æ£’æ€§
- **æ··åˆç²¾åº¦**ï¼šåœ¨æ”¯æŒçš„æƒ…å†µä¸‹ä½¿ç”¨FP16åŠ é€Ÿè®­ç»ƒ
- **åˆ†å¸ƒå¼è®­ç»ƒ**ï¼šå¯é€‰çš„å¤šGPUæ”¯æŒ

#### æ¨ç†æµç¨‹

æ¨ç†ç³»ç»ŸåŒ…æ‹¬ï¼š

- **é¢„å¤„ç†**ï¼šä¸è®­ç»ƒæµç¨‹ä¸€è‡´
- **æ‰¹å¤„ç†**ï¼šé«˜æ•ˆå¤„ç†å¤šä¸ªå›¾åƒ
- **æ¨¡å‹é›†æˆ**ï¼šå¯é€‰çš„å¤šæ¨¡å‹ç»„åˆ
- **åå¤„ç†**ï¼šç½®ä¿¡åº¦æ ¡å‡†å’Œé˜ˆå€¼å¤„ç†
- **å¯è§†åŒ–**ï¼šç”Ÿæˆè§£é‡Šæ€§çƒ­åŠ›å›¾

## ğŸ”¬ é«˜çº§ç”¨æ³• <a name="é«˜çº§ç”¨æ³•"></a>

### è‡ªå®šä¹‰æ¨¡å‹å¼€å‘

é€šè¿‡è‡ªå®šä¹‰æ¨¡å‹æ¶æ„æ‰©å±•VerifyVision-Proï¼š

1. **æ·»åŠ æ–°æ¨¡å‹**ï¼š
   
   ä¿®æ”¹`src/models/models.py`ä»¥åŒ…æ‹¬æ‚¨çš„æ¶æ„ï¼š

   ```python
   class CustomModel(nn.Module):
       def __init__(self, num_classes=2, pretrained=False):
           super(CustomModel, self).__init__()
           # å®šä¹‰æ‚¨çš„æ¨¡å‹æ¶æ„
           
       def forward(self, x):
           # å®šä¹‰å‰å‘ä¼ æ’­
           return x
   ```

2. **æ³¨å†Œæ¨¡å‹**ï¼š
   
   å°†æ‚¨çš„æ¨¡å‹æ·»åŠ åˆ°æ¨¡å‹å·¥å‚ï¼š

   ```python
   def get_model(name, num_classes=2, pretrained=False):
       models = {
           # ç°æœ‰æ¨¡å‹
           'custom_model': CustomModel,
       }
       return models[name](num_classes=num_classes, pretrained=pretrained)
   ```

3. **ä½¿ç”¨æ‚¨çš„æ¨¡å‹**ï¼š
   
   ```bash
   python main.py train \
     --real-dir data/processed/real \
     --fake-dir data/processed/fake \
     --model custom_model \
     --epochs 30
   ```

### é«˜çº§æ•°æ®é›†æŠ€æœ¯

é€šè¿‡é«˜çº§æ•°æ®é›†å¤„ç†å¢å¼ºæ¨¡å‹æ€§èƒ½ï¼š

#### åˆæˆæ•°æ®ç”Ÿæˆ

ä½¿ç”¨ç”Ÿæˆæ–¹æ³•åˆ›å»ºé¢å¤–çš„è®­ç»ƒæ•°æ®ï¼š

```bash
python main.py generate-synthetic \
  --base-images data/real \
  --output-dir data/synthetic \
  --count 1000 \
  --techniques "copy,splice,removal,noise"
```

#### è·¨æ•°æ®é›†éªŒè¯

æµ‹è¯•æ¨¡å‹åœ¨ä¸åŒæ•°æ®é›†é—´çš„æ³›åŒ–èƒ½åŠ›ï¼š

```bash
python main.py cross-validate \
  --train-real data/datasetA/real \
  --train-fake data/datasetA/fake \
  --test-real data/datasetB/real \
  --test-fake data/datasetB/fake \
  --model efficientnet_b0
```

#### ä¸»åŠ¨å­¦ä¹ 

å®ç°ä¸»åŠ¨å­¦ä¹ ä»¥ä¼˜å…ˆæ ‡æ³¨åŠªåŠ›ï¼š

```bash
python main.py active-learning \
  --unlabeled data/unlabeled \
  --labeled data/labeled \
  --model-path models/saved/model.pth \
  --selection-method "entropy" \
  --batch-size 100
```

### æ¨¡å‹è§£é‡Š

é€šè¿‡é«˜çº§å¯è§†åŒ–ç†è§£æ¨¡å‹å†³ç­–ï¼š

```bash
python main.py interpret \
  --image path/to/image.jpg \
  --model-path models/saved/model.pth \
  --method "gradcam" \
  --output-dir visualizations
```

å¯ç”¨çš„è§£é‡Šæ–¹æ³•ï¼š
- `gradcam`ï¼šæ¢¯åº¦åŠ æƒç±»æ¿€æ´»æ˜ å°„
- `lime`ï¼šå±€éƒ¨å¯è§£é‡Šçš„æ¨¡å‹ä¸å¯çŸ¥è§£é‡Š
- `shap`ï¼šShapleyåŠ æ€§è§£é‡Š
- `occlusion`ï¼šé®æŒ¡æ•æ„Ÿæ€§åˆ†æ

## âš¡ æ€§èƒ½ä¼˜åŒ– <a name="æ€§èƒ½ä¼˜åŒ–"></a>

### ç¡¬ä»¶åŠ é€Ÿ

é€šè¿‡ç¡¬ä»¶ä¼˜åŒ–æœ€å¤§åŒ–ç³»ç»Ÿæ€§èƒ½ï¼š

#### GPUåŠ é€Ÿ

å¯ç”¨GPUåŠ é€Ÿä»¥å®ç°æ›´å¿«çš„è®­ç»ƒå’Œæ¨ç†ï¼š

```bash
# æ£€æŸ¥GPUå¯ç”¨æ€§
python -c "import torch; print(torch.cuda.is_available(), torch.cuda.get_device_name(0) if torch.cuda.is_available() else 'æ— GPU')"

# ä½¿ç”¨GPUè®­ç»ƒï¼ˆå¦‚æœå¯ç”¨åˆ™è‡ªåŠ¨ä½¿ç”¨ï¼‰
python main.py train --model efficientnet_b0 --batch-size 64 --real-dir data/processed/real --fake-dir data/processed/fake
```

#### å¤šGPUè®­ç»ƒ

å°†è®­ç»ƒåˆ†å¸ƒåˆ°å¤šä¸ªGPUä¸Šä»¥å¤„ç†æ›´å¤§çš„æ¨¡å‹ï¼š

```bash
python -m torch.distributed.launch --nproc_per_node=4 main.py train \
  --distributed \
  --real-dir data/processed/real \
  --fake-dir data/processed/fake \
  --model efficientnet_b0 \
  --batch-size 128
```

#### CPUä¼˜åŒ–

åœ¨GPUä¸å¯ç”¨æ—¶ä¼˜åŒ–CPUæ€§èƒ½ï¼š

```bash
# è®¾ç½®CPUçº¿ç¨‹æ•°
python main.py train --num-workers 8 --pin-memory --real-dir data/processed/real --fake-dir data/processed/fake
```

### å†…å­˜ä¼˜åŒ–

ç®¡ç†å†…å­˜ä½¿ç”¨ä»¥å®ç°é«˜æ•ˆå¤„ç†ï¼š

#### æ‰¹å¤§å°è°ƒæ•´

æ ¹æ®å¯ç”¨å†…å­˜è°ƒæ•´æ‰¹å¤§å°ï¼š

| ç¡¬ä»¶ | æ¨èæ‰¹å¤§å° |
|----------|------------------------|
| CPU | 8-16 |
| GPU 4GBæ˜¾å­˜ | 16-32 |
| GPU 8GBæ˜¾å­˜ | 32-64 |
| GPU 16GB+æ˜¾å­˜ | 64-128 |

```bash
# å†…å­˜æœ‰é™æ—¶ä½¿ç”¨è¾ƒå°æ‰¹å¤§å°
python main.py train --batch-size 8 --real-dir data/processed/real --fake-dir data/processed/fake

# é«˜ç«¯ç³»ç»Ÿä½¿ç”¨è¾ƒå¤§æ‰¹å¤§å°
python main.py train --batch-size 128 --real-dir data/processed/real --fake-dir data/processed/fake
```

#### æ¢¯åº¦ç´¯ç§¯

åœ¨æœ‰é™å†…å­˜ä¸Šä½¿ç”¨å¤§çš„æœ‰æ•ˆæ‰¹å¤§å°è¿›è¡Œè®­ç»ƒï¼š

```bash
python main.py train \
  --batch-size 16 \
  --gradient-accumulation 4 \
  --real-dir data/processed/real \
  --fake-dir data/processed/fake
```

è¿™æ¨¡æ‹Ÿäº†64ï¼ˆ16 Ã— 4ï¼‰çš„æ‰¹å¤§å°ï¼Œä½†åªéœ€è¦16ä¸ªæ ·æœ¬çš„å†…å­˜ã€‚

### æ¨ç†ä¼˜åŒ–

åŠ é€Ÿç”Ÿäº§éƒ¨ç½²ï¼š

#### æ¨¡å‹é‡åŒ–

å‡å°‘æ¨¡å‹å¤§å°å¹¶æé«˜æ¨ç†é€Ÿåº¦ï¼š

```bash
python main.py quantize \
  --model-path models/saved/best_model.pth \
  --quantized-model-path models/saved/quantized_model.pth \
  --calibration-images data/processed/real
```

è¿™å¯å°†æ¨¡å‹å¤§å°å‡å°‘é«˜è¾¾75%ï¼Œå¹¶å°†æ¨ç†é€Ÿåº¦æé«˜2-4å€ã€‚

#### æ‰¹é‡æ¨ç†

åŒæ—¶å¤„ç†å¤šä¸ªå›¾åƒï¼š

```bash
python main.py batch-inference \
  --input-dir data/test \
  --output-file results.csv \
  --model-path models/saved/best_model.pth \
  --batch-size 32
```

#### æ¨¡å‹å‰ªæ

ç§»é™¤ä¸å¿…è¦çš„è¿æ¥ä»¥åŠ å¿«æ¨ç†ï¼š

```bash
python main.py prune \
  --model-path models/saved/best_model.pth \
  --pruned-model-path models/saved/pruned_model.pth \
  --prune-ratio 0.3
```

## ğŸ”¨ å¸¸è§é—®é¢˜è§£å†³ <a name="å¸¸è§é—®é¢˜è§£å†³"></a>

### å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

æœ¬èŠ‚è§£å†³å¸¸è§é—®é¢˜ï¼š

#### ğŸ”„ å®‰è£…é—®é¢˜

##### CUDAå…¼å®¹æ€§é—®é¢˜

**ç—‡çŠ¶**ï¼šPyTorchå®‰è£…æˆåŠŸä½†CUDAæœªè¢«æ£€æµ‹åˆ°ï¼Œæˆ–åœ¨GPUæ“ä½œæœŸé—´å´©æºƒã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®ä¿ç‰ˆæœ¬å…¼å®¹ï¼š
   ```bash
   # æ£€æŸ¥CUDAç‰ˆæœ¬
   nvcc --version
   
   # å®‰è£…å…¼å®¹çš„PyTorchç‰ˆæœ¬
   pip install torch==2.0.1+cu118 torchvision==0.15.2+cu118 -f https://download.pytorch.org/whl/torch_stable.html
   ```

2. éªŒè¯å®‰è£…ï¼š
   ```bash
   python -c "import torch; print('CUDAå¯ç”¨ï¼š', torch.cuda.is_available())"
   ```

##### åŒ…ä¾èµ–å†²çª

**ç—‡çŠ¶**ï¼š`pip install`å› ä¾èµ–å†²çªè€Œå¤±è´¥ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. åˆ›å»ºæ–°çš„è™šæ‹Ÿç¯å¢ƒï¼š
   ```bash
   python -m venv fresh_env
   source fresh_env/bin/activate
   ```

2. é€ä¸ªå®‰è£…ä¾èµ–ï¼š
   ```bash
   pip install numpy
   pip install torch torchvision
   pip install -r requirements.txt
   ```

##### Pythonç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜

**ç—‡çŠ¶**ï¼šä½¿ç”¨è¾ƒæ–°ç‰ˆæœ¬çš„Pythonï¼ˆå¦‚Python 3.13ï¼‰å®‰è£…ä¾èµ–æ—¶å‡ºç°é”™è¯¯ï¼Œç‰¹åˆ«æ˜¯ä¸numpyã€pkgutilç­‰åŒ…ç›¸å…³çš„é”™è¯¯ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ä½¿ç”¨Python 3.9-3.10ç‰ˆæœ¬åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼š
   ```bash
   # é¦–å…ˆæ£€æŸ¥å¯ç”¨çš„Pythonç‰ˆæœ¬
   which -a python3
   python3 -V
   /usr/bin/python3 -V  # å¯èƒ½ä¼šæ˜¾ç¤ºç³»ç»ŸPythonç‰ˆæœ¬
   
   # ä½¿ç”¨å…¼å®¹ç‰ˆæœ¬åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
   /usr/bin/python3 -m venv imgvenv
   source imgvenv/bin/activate
   ```

2. éªŒè¯Pythonç‰ˆæœ¬ï¼š
   ```bash
   python -V  # åº”æ˜¾ç¤ºå…¼å®¹ç‰ˆæœ¬ï¼Œå¦‚Python 3.9.x
   ```

3. å®‰è£…ä¾èµ–ï¼š
   ```bash
   pip install -r requirements.txt
   ```

> **æ³¨æ„**ï¼šè¯¥é¡¹ç›®çš„ä¾èµ–ä¸Python 3.8-3.10ç‰ˆæœ¬æœ€ä¸ºå…¼å®¹ã€‚è¾ƒæ–°ç‰ˆæœ¬å¯èƒ½éœ€è¦è°ƒæ•´ä¾èµ–ç‰ˆæœ¬æˆ–ç­‰å¾…åŒ…æ›´æ–°ä»¥æ”¯æŒæ–°çš„Pythonç‰ˆæœ¬ã€‚

#### ğŸ–¥ï¸ è¿è¡Œæ—¶é—®é¢˜

##### macOSä¸Šçš„ç«¯å£å ç”¨

**ç—‡çŠ¶**ï¼šWebåº”ç”¨å¯åŠ¨å¤±è´¥ï¼Œæç¤º"åœ°å€å·²è¢«ä½¿ç”¨"é”™è¯¯ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. åœ¨macOSä¸Šï¼Œç«¯å£5000é€šå¸¸è¢«AirPlayæœåŠ¡å ç”¨ï¼Œå»ºè®®ä½¿ç”¨å…¶ä»–ç«¯å£ï¼ˆå¦‚8080ï¼‰ï¼š
   ```bash
   python main.py web --model-path models/saved/best_model.pth --model-name cnn --port 8080
   ```

2. æˆ–æ‰¾åˆ°å¹¶ç»ˆæ­¢ä½¿ç”¨ç«¯å£5000çš„è¿›ç¨‹ï¼ˆä¸æ¨èï¼Œå¯èƒ½ä¼šå½±å“ç³»ç»ŸæœåŠ¡ï¼‰ï¼š
   ```bash
   sudo lsof -i :5000
   kill -9 <PID>
   ```

3. ä¹Ÿå¯ä»¥åœ¨å¯åŠ¨Webåº”ç”¨æ—¶ä½¿ç”¨`--host`å‚æ•°æŒ‡å®šåªåœ¨æœ¬åœ°æ¥å£ä¸Šç›‘å¬ï¼š
   ```bash
   python main.py web --model-path models/saved/best_model.pth --model-name cnn --port 5000 --host 127.0.0.1
   ```

> **æ³¨æ„**ï¼šmacOS MontereyåŠæ›´æ–°ç‰ˆæœ¬ä¸­ï¼Œç«¯å£5000è¢«AirPlayæ¥æ”¶å™¨æœåŠ¡é¢„ç•™ã€‚å¦‚éœ€åœ¨é»˜è®¤ç«¯å£è¿è¡Œï¼Œè¯·åœ¨ç³»ç»Ÿè®¾ç½®ä¸­ç¦ç”¨AirPlayæ¥æ”¶å™¨æˆ–é€‰æ‹©å…¶ä»–ç«¯å£ã€‚

##### å†…å­˜æº¢å‡º(OOM)é”™è¯¯

**ç—‡çŠ¶**ï¼šè®­ç»ƒå´©æºƒï¼Œå‡ºç°"CUDAå†…å­˜ä¸è¶³"æˆ–ç³»ç»Ÿå†…å­˜é”™è¯¯ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. å‡å°æ‰¹å¤§å°ï¼š
   ```bash
   python main.py train --batch-size 4 --real-dir data/processed/real --fake-dir data/processed/fake
   ```

2. ä½¿ç”¨æ¢¯åº¦ç´¯ç§¯ï¼š
   ```bash
   python main.py train --batch-size 2 --gradient-accumulation 8 --real-dir data/processed/real --fake-dir data/processed/fake
   ```

3. ä½¿ç”¨æ›´å°çš„æ¨¡å‹ï¼š
   ```bash
   python main.py train --model resnet18 --real-dir data/processed/real --fake-dir data/processed/fake
   ```

##### æ•°æ®é›†ä¸ºç©ºé”™è¯¯

**ç—‡çŠ¶**ï¼šè®­ç»ƒå¤±è´¥ï¼Œæç¤º"æ•°æ®é›†ä¸ºç©º"é”™è¯¯ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. éªŒè¯ç›®å½•è·¯å¾„ï¼š
   ```bash
   ls -la data/processed/real data/processed/fake
   ```

2. æ£€æŸ¥æ–‡ä»¶æ ¼å¼ï¼ˆåº”ä¸º.jpgã€.jpegæˆ–.pngï¼‰ï¼š
   ```bash
   find data/processed/real -type f | grep -v -E '\.(jpg|jpeg|png)$'
   ```

3. ç”Ÿæˆæµ‹è¯•æ•°æ®ä»¥éªŒè¯ç³»ç»Ÿï¼š
   ```bash
   python generate_test_images.py
   ```

#### ğŸ‹ï¸â€â™‚ï¸ è®­ç»ƒé—®é¢˜

##### æ¨¡å‹æ€§èƒ½ä¸ä½³

**ç—‡çŠ¶**ï¼šæ¨¡å‹å‡†ç¡®ç‡ä½æˆ–è®­ç»ƒæœŸé—´æ²¡æœ‰æ”¹å–„ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. å¢åŠ è®­ç»ƒæ—¶é•¿ï¼š
   ```bash
   python main.py train --epochs 50 --real-dir data/processed/real --fake-dir data/processed/fake
   ```

2. å°è¯•ä¸åŒæ¨¡å‹ï¼š
   ```bash
   python main.py train --model efficientnet_b0 --pretrained --real-dir data/processed/real --fake-dir data/processed/fake
   ```

3. ç¡®ä¿æ•°æ®é›†å¹³è¡¡ï¼š
   ```bash
   python main.py analyze-dataset --real-dir data/processed/real --fake-dir data/processed/fake
   ```

4. å¯ç”¨æ•°æ®å¢å¼ºï¼š
   ```bash
   python main.py train --augmentation --real-dir data/processed/real --fake-dir data/processed/fake
   ```

##### è®­ç»ƒå¹³å°æœŸ

**ç—‡çŠ¶**ï¼šéªŒè¯å‡†ç¡®ç‡åœ¨è®­ç»ƒæ—©æœŸåœæ­¢æ”¹å–„ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. è°ƒæ•´å­¦ä¹ ç‡ï¼š
   ```bash
   python main.py train --learning-rate 0.0001 --real-dir data/processed/real --fake-dir data/processed/fake
   ```

2. å®ç°å­¦ä¹ ç‡è°ƒåº¦ï¼š
   ```bash
   python main.py train --scheduler cosine --real-dir data/processed/real --fake-dir data/processed/fake
   ```

3. å°è¯•ä¸åŒä¼˜åŒ–å™¨ï¼š
   ```bash
   python main.py train --optimizer adamw --real-dir data/processed/real --fake-dir data/processed/fake
   ```

##### è¿‡æ‹Ÿåˆ

**ç—‡çŠ¶**ï¼šè®­ç»ƒå‡†ç¡®ç‡é«˜ä½†éªŒè¯å‡†ç¡®ç‡ä½ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ·»åŠ æ­£åˆ™åŒ–ï¼š
   ```bash
   python main.py train --weight-decay 0.001 --dropout 0.3 --real-dir data/processed/real --fake-dir data/processed/fake
   ```

2. ä½¿ç”¨æ—©åœï¼š
   ```bash
   python main.py train --early-stopping --patience 5 --real-dir data/processed/real --fake-dir data/processed/fake
   ```

3. å¢åŠ æ•°æ®é›†å¤§å°æˆ–å¤šæ ·æ€§ã€‚

## ğŸ“ æ³¨æ„äº‹é¡¹ <a name="æ³¨æ„äº‹é¡¹"></a>

### å®ç”¨å»ºè®®

#### æ•°æ®é›†è´¨é‡

è®­ç»ƒæ•°æ®çš„è´¨é‡ç›´æ¥å½±å“æ¨¡å‹æ€§èƒ½ï¼š

- **è§„æ¨¡**ï¼šè‰¯å¥½æ€§èƒ½è‡³å°‘éœ€è¦æ¯ç±»1,000+å›¾åƒ
- **å¹³è¡¡**ï¼šä¿æŒçœŸå®å’Œä¼ªé€ å›¾åƒæ•°é‡ç›¸ç­‰
- **å¤šæ ·æ€§**ï¼šåŒ…æ‹¬å„ç§å›¾åƒæ¥æºã€å…‰ç…§æ¡ä»¶å’Œå†…å®¹
- **çœŸå®æ€§**ï¼šç¡®ä¿"çœŸå®"å›¾åƒç¡®å®æœªç»å¤„ç†
- **çœŸå®æ„Ÿ**ï¼šåˆ›å»ºä»£è¡¨ç°å®æ“ä½œæ–¹æ³•çš„ä¼ªé€ å›¾åƒ
- **å…ƒæ•°æ®**ï¼šä¿ç•™ç›¸å…³å…ƒæ•°æ®ï¼ˆç›¸æœºå‹å·ã€ç¼–è¾‘è½¯ä»¶ç­‰ï¼‰

#### æ¨¡å‹é€‰æ‹©

æ ¹æ®æ‚¨çš„å…·ä½“éœ€æ±‚é€‰æ‹©æ¨¡å‹ï¼š

| ä¼˜å…ˆè€ƒè™‘ | æ¨èæ¨¡å‹ |
|----------|-------------------|
| é€Ÿåº¦ | `cnn`æˆ–`resnet18` |
| å‡†ç¡®ç‡ | `efficientnet_b0`æˆ–`xception` |
| å¹³è¡¡æ€§èƒ½ | `resnet18`æˆ–`efficientnet_b0` |
| æœ‰é™æ•°æ® | `cnn`é…åˆå¤§é‡å¢å¼º |
| ç”Ÿäº§ç¯å¢ƒ | å¤šä¸ªæ¨¡å‹çš„é›†æˆ |

#### éƒ¨ç½²è€ƒè™‘å› ç´ 

å¯¹äºå®é™…éƒ¨ç½²ï¼š

- **å®‰å…¨æ€§**ï¼šå®æ–½é€Ÿç‡é™åˆ¶å’Œæ–‡ä»¶éªŒè¯
- **å¯æ‰©å±•æ€§**ï¼šå¯¹é«˜æµé‡åº”ç”¨ä½¿ç”¨è´Ÿè½½å‡è¡¡
- **éšç§**ï¼šè€ƒè™‘æ•æ„Ÿææ–™çš„æœ¬åœ°å¤„ç†
- **é€æ˜åº¦**ï¼šä¼ è¾¾ç½®ä¿¡æ°´å¹³å’Œå±€é™æ€§
- **æ›´æ–°**ï¼šå®šæœŸç”¨æ–°çš„ä¼ªé€ æŠ€æœ¯é‡æ–°è®­ç»ƒ
- **å¤‡é€‰æ–¹æ¡ˆ**ï¼šå¯¹å…³é”®æˆ–æ¨¡ç³Šæƒ…å†µæœ‰äººå·¥å®¡æ ¸

#### æ£€æµ‹å±€é™æ€§

äº†è§£ç³»ç»Ÿå±€é™æ€§ï¼š

- æ£€æµ‹å‡†ç¡®ç‡å› ä¼ªé€ ç±»å‹å’Œè´¨é‡è€Œå¼‚
- é«˜çº§AIç”Ÿæˆå›¾åƒå¯èƒ½éœ€è¦ä¸“é—¨æ¨¡å‹
- éå¸¸å°çš„æ“ä½œå¯èƒ½è¢«å¿½ç•¥
- ç»“æœåº”è¢«è§†ä¸ºæ¦‚ç‡æ€§çš„ï¼Œè€Œéç¡®å®šæ€§çš„
- ç³»ç»Ÿåº”ä½œä¸ºæ›´å¹¿æ³›éªŒè¯ç­–ç•¥çš„ä¸€éƒ¨åˆ†

## ğŸ¤ å‚ä¸è´¡çŒ® <a name="å‚ä¸è´¡çŒ®"></a>

æˆ‘ä»¬æ¬¢è¿å¯¹VerifyVision-Proçš„è´¡çŒ®ï¼ä»¥ä¸‹æ˜¯æ‚¨å¯ä»¥å¸®åŠ©çš„æ–¹å¼ï¼š

### æŠ¥å‘Šé—®é¢˜

- ä½¿ç”¨GitHub issueè·Ÿè¸ªå™¨æŠ¥å‘Šbug
- åŒ…æ‹¬è¯¦ç»†çš„æ­¥éª¤ä»¥é‡ç°é—®é¢˜
- å¿…è¦æ—¶é™„åŠ æ ·æœ¬å›¾åƒï¼ˆç¡®ä¿æ‚¨æœ‰æƒå…±äº«ï¼‰
- æŒ‡å®šæ‚¨çš„ç¯å¢ƒï¼ˆæ“ä½œç³»ç»Ÿã€Pythonç‰ˆæœ¬ç­‰ï¼‰

### å¼€å‘æµç¨‹

1. **Forkä»“åº“**
2. **åˆ›å»ºç‰¹æ€§åˆ†æ”¯**ï¼š
   ```bash
   git checkout -b feature/your-feature-name
   ```
3. **åšå‡ºæ›´æ”¹**
4. **è¿è¡Œæµ‹è¯•**ï¼š
   ```bash
   python -m pytest tests/
   ```
5. **æäº¤æ‹‰å–è¯·æ±‚**

### è´¡çŒ®é¢†åŸŸ

æˆ‘ä»¬ç‰¹åˆ«æ¬¢è¿ä»¥ä¸‹é¢†åŸŸçš„è´¡çŒ®ï¼š

- **æ–°æ¨¡å‹**ï¼šæœ€å…ˆè¿›æ¶æ„çš„å®ç°
- **æ£€æµ‹æ–¹æ³•**ï¼šè¯†åˆ«æ“ä½œçš„æ–°æ–¹æ³•
- **UIæ”¹è¿›**ï¼šå¢å¼ºWebç•Œé¢å’Œå¯è§†åŒ–
- **æ€§èƒ½ä¼˜åŒ–**ï¼šæé«˜é€Ÿåº¦å’Œèµ„æºä½¿ç”¨
- **æ–‡æ¡£**ï¼šæ•™ç¨‹ã€ç¤ºä¾‹å’Œè¯´æ˜
- **æœ¬åœ°åŒ–**ï¼šæ–‡æ¡£å’Œç•Œé¢çš„ç¿»è¯‘

### ä»£ç é£æ ¼

è¯·éµå¾ªä»¥ä¸‹å‡†åˆ™ï¼š

- ç¬¦åˆPEP 8çš„Pythonä»£ç 
- æ‰€æœ‰å‡½æ•°ã€ç±»å’Œæ¨¡å—çš„æ–‡æ¡£å­—ç¬¦ä¸²
- é€‚å½“çš„ç±»å‹æç¤º
- å¤æ‚é€»è¾‘çš„å…¨é¢æ³¨é‡Š
- æ–°åŠŸèƒ½çš„å•å…ƒæµ‹è¯•

## ğŸ“„ è®¸å¯è¯ <a name="è®¸å¯è¯"></a>

VerifyVision-Proåœ¨MITè®¸å¯è¯ä¸‹å‘å¸ƒã€‚

### ç¬¬ä¸‰æ–¹ç»„ä»¶

æœ¬é¡¹ç›®åŒ…å«æ¥è‡ªç¬¬ä¸‰æ–¹å¼€æºé¡¹ç›®çš„ç»„ä»¶ï¼š

- PyTorch (BSDè®¸å¯è¯)
- Flask (BSDè®¸å¯è¯)
- TorchVision (BSDè®¸å¯è¯)
- OpenCV (Apache 2.0è®¸å¯è¯)
- Bootstrap (MITè®¸å¯è¯)
- å…¶ä»–å„ç§åŒ…ï¼Œå¦‚requirements.txtä¸­æ‰€åˆ—
---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª Starï¼
[![Star History](https://api.star-history.com/svg?repos=lintsinghua/VerifyVision-Pro&type=Date)](https://star-history.com/#lintsinghua/VerifyVision-Pro&Date)
